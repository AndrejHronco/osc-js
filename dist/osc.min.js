/*! osc-js - v0.0.1 - 2014-03-09 by marmorkuchen.net */
!function(a){"use strict";var b={SOCKET:{IS_NOT_INITALIZED:-1,IS_CONNECTING:0,IS_OPEN:1,IS_CLOSING:2,IS_CLOSED:3}},c=function(){this.CALLBACKS_KEY="_cb",this._callbackHandlers={onOpen:[],onError:[],onClose:[]},this._addressHandlers={},this._uuid=-1,this._transformToArray=function(a){var b=a.split("/");return b=b.filter(function(a){return a.length>0})},this._findAddressHandler=function(a){for(var b=this._addressHandlers,c=0;c<a.length;++c)b=b&&a[c]in b?b[a[c]]:null;return b&&this.CALLBACKS_KEY in b?b[this.CALLBACKS_KEY]:null}};c.prototype.on=function(a,b){var c,d,e,f;if("string"!=typeof a&&"object"!=typeof a||"function"!=typeof b)throw"OSCEventHandler Error: on expects string/array as eventName and function as callback";if(c=(++this._uuid).toString(),e={token:c,callback:b},"string"==typeof a){if(this._callbackHandlers[a])return this._callbackHandlers[a].push(e),c;d=this._transformToArray(a)}else d=a;var g=this._addressHandlers;for(f=0;f<d.length;++f){var h=d[f];h in g||(g[h]={},g[h][this.CALLBACKS_KEY]=[]),g=g[h]}return this.CALLBACKS_KEY in g||(g[this.CALLBACKS_KEY]=[]),g[this.CALLBACKS_KEY].push(e),c},c.prototype.off=function(a,b){var c,d,e;if("string"!=typeof a&&"object"!=typeof a||!b)throw"OSCEventHandler Error: off expects string/array as eventName and a proper token";if(e=!1,"string"==typeof a){if(this._callbackHandlers[a]){for(d=0;d<this._callbackHandlers[a].length;d++)this._callbackHandlers[a][d].token===b&&(this._callbackHandlers[a].splice(d,1),e=!0);return e}c=this._transformToArray(a)}else c=a;var f=this._findAddressHandler(c);if(f)for(d=0;d<f.length;d++)f[d].token===b&&(f.splice(d,1),e=!0);return e},c.prototype.notify=function(a,b){var c;if("string"==typeof a){if(this._callbackHandlers[a])return this._callbackHandlers[a].forEach(function(a){a.callback(b)}),!0;c=this._transformToArray(a)}else c=a;var d=this._findAddressHandler(c);return d.forEach(function(a){a.callback(b)}),!0};var d=function(){this._socket=null};d.prototype.server=function(a,b){if(!a||!b)throw"OSCSocket Error: missing WebSocket address or port";return this._socket=new WebSocket("ws://"+a+":"+b),this._socket.binaryType="arraybuffer",this._socket.onopen=function(a){e.notify("onOpen",a)},this._socket.onerror=function(a){e.notify("onError",a)},!0},d.prototype.status=function(){return this._socket?this._socket.readyState:b.SOCKET.IS_NOT_INITALIZED};var e,f,g,h=function(){return!0},i=function(){this.SOCKET=b.SOCKET,e=new c,f=new d,g=new h,this.__OSCEventHandler=e};i.prototype.on=function(a,b){return e.on(a,b)},i.prototype.off=function(a,b){return e.off(a,b)},i.prototype.server=function(a,b){return f.server(a,b)},i.prototype.status=function(){return f.status()},a.OSC=i}(window);
//# sourceMappingURL=osc.min.map